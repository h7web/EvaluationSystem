@model StaffEvaluations.Models.IndexViewModel

@{
    ViewBag.Title = "Home Page";
}

<h2>Evaluations from your supervisor</h2>

@if (Model.MyEvaluations.Count > 0)
{
    <ul>
        @foreach (StaffEvaluations.Models.StaffPerformanceEvaluation eval in Model.MyEvaluations)
        {
            <li>
                @Html.ActionLink("Go to your evaluation", "EditEval", new { id = eval.EvalId })
            </li>
        }
    </ul>
}
else
{
    <ul><li>Not yet available.</li></ul>
}

<h2>Evaluations for your staff</h2>
<ul>
    @foreach (LibDirectoryIntegration.DirectReport directReport in Model.Super.direct_reports)
    {
        if (Model.MyStaffEvaluations.Any(e => e.NetId == directReport.netid))
        {
            var eid = Model.MyStaffEvaluations.Where(e => e.NetId == directReport.netid).Single().EvalId;
            var status = Model.MyStaffEvaluations.Where(e => e.NetId == directReport.netid).Single().Status;

            <li>
                <strong>@directReport.name</strong> (@status)

                @if (status != "Complete")
                {
                    @Html.ActionLink("Edit", "EditEval", new { id = eid }) 
                }
                else
                {
                    @Html.ActionLink("View", "EditEval", new { id = eid })
                }

                @if (status == "In-Work")
                {
                    @:| 
                    @Html.ActionLink("Submit", "SubmitEval", new { id = eid })
                    @:|
                    @Html.ActionLink("Delete", "DeleteEval", new { id = eid })
                }
            </li>
        }
        else
        {
            <li>
                <strong>@directReport.name </strong>
                @Html.ActionLink("Start Evaluation", "CreateEval", new { id = directReport.netid, type = directReport.employee_type_code })
            </li>
        }
    }
</ul>